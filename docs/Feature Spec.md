# Feature Spec

## 来自合肥物理大学四位同学的故事

### 小铿和小锵的故事

小铿和小锵都是世界一流大学合肥物理大学的学生，是合物大男女比例严重失衡情况下为数不多的情侣。小铿是一位资深二次元爱好者，平时最喜欢宅在宿舍里，他的女朋友小锵是一位狂热的购物狂，最喜欢盯着自己满满当当的衣柜沉思许久，憋出一句我怎么没有合适的衣服穿了。小铿平时最害怕的事情，莫过于被小锵从自己最爱的宿舍揪出来逛街买衣服，毕竟这种事情，这对小铿这样的人来说是一种折磨。

10 月 1 日是小锵的生日，这天小锵又把小铿叫出来一起逛街买衣服。两人在合肥二里屯大古里一起转悠了三个小时，小铿几乎都要迷失在灯红酒绿的商场中了，他觉得小锵可能试了比他上大学穿过的衣服更多数量的衣服，却也没有挑中一件合适的带回去。走在回校的路上，小铿精疲力尽地问小锵：“你为什么不在网上买衣服呢？老是去商场逛，不累吗？”小锵说：”我也想啊，但是每次在网上看着挺漂亮的，一买回来自己穿就不是那么回事了，女孩子买衣服，还是在商场自己试才能看出来效果好不好。你们直男一点都不懂我们女生。“

小铿回到家里，看着 Teams 上 mentor 发来的亲切问候：“小铿，paper 写的咋样了？CVPR deadline 马上就要到了哦。”想到距离 CVPR 仅剩 1 个月的紧迫关头自己还花费一无所获的三个小时逛街，小铿陷入了沉思。


### 小微和小软的故事

“产品与实物不符啊，我穿上身的效果完全和卖家秀不一样啊，差评！”

“你们这衣服是不是只适合给瘦子穿啊，我身材稍微走形一点看起来就完全不对劲了，踩坑了，给大家提个醒。”

小软看着自己的服装网店的新鲜差评，感到万分无奈。“唉这届客户真难带,只看了衣服的图片就脑补出自己穿上之后美若天仙的画面”，心里臭骂着，脸上还是得给顾客赔个不是。

这可不行，不是所有人对自己适不适合一件衣服都有自知之明的，要是能让顾客看到自己穿上一件衣服的样子，就不会有这么多后来的差评了。但奈何自己只是一个网店销售，也不知道该如何下手。

国庆假期结束后，小软碰巧遇见了他的好朋友，目前正在巨硬公司的 CV 组实习的小微。小软向小微提到了自己的需求，期望能有所收获······

### virtual-try-on

心情烦躁，小铿想找人抒发一下自己不爽的情绪。他约上了好朋友小微一起出来喝酒，将最近不愉快的事情一股脑地吐诉出来。从赶不完的paper到女朋友之前的情感不顺，听得小微那叫一个连连叹气，向小铿最近不愉快的经历表示同情。

“每次因为女朋友需要找人陪她看衣服，我就被迫被拉上和她一起。但我实在是没有更多的时间陪女朋友出去逛街试衣服了，我自己的任务都完成不了，但也不想伤了女友的心，这可怎么办呢？”

小微听到此话，脑中浮现出了最近看到的微软亚洲研究院的研究成果，灵机一动:“你说，要是有一个软件能自动得到各种各样试装的图片，那岂不是女友就可以自己随心所欲地选择，你就不需要一直陪着你女友身边走走逛逛了？而且,小软也可以用这个软件让客户提前虚拟试穿之后再下单,想必退货的人应该比以前少很多.”

“可是，哪里有这样的软件呢？”

“你知道 MSRA 之前发布的 CoCosNet 模型吗?只需要将一个人全身照和衣服图片输入，就可以直接合成一张完美的穿衣照片了呢。但目前还只有研究成果，而没有面向用户的应用。你技术能力这么强，要不要试着搞一个？”

小铿暗淡的眼中逐渐泛起了光，阴沉许久的脸上终于出现了笑容。他当即回家调研了这篇 paper，第一天写好了 Feature Spec，第二天写好了 Design Spec，第三天完成了整体代码，第四天修 bug 并完成release，赶在第五天又要逛街之前将这个 app 交付给了小锵。

“这是什么？”小铿的女友小锵将信将疑地打开这个手机 app。她按照 app 指示首先照了一张全身照，顿时手机上就出现了好多小锵的照片，每一张照片上小锵都穿着不同的衣服。

“哇，太神奇了，这看起来就像是我自己在试衣一样！好棒啊!”，小锵兴奋了起来，像刷抖音一样一张又一张地向下刷新新的图片，期待找到心仪的衣服。

小铿还指导小锵点开衣服的详细内容，将喜欢的衣服加入收藏，分享给了自己的姐妹（姐妹的羡慕眼.jpg）。经过一番精挑细选，小锵终于选定了一件完美的衣服。她点击进入服装信息导向的购物界面，立即下单，完成了一次足不出户的试衣购物。而小铿看着女友心满意足的样子，也暗自高兴，自己终于有时间赶完 paper 了。

小微也邀请了小软进行试用。小软在平台上发布了许多衣服，添加了 virtual-try-on 的支持后，客户可以先虚拟试穿，参考效果后再决定要不要下单。经过一段时间的统计发现，使用 virtual-try-on 后再购买的用户退货率显著下降，小软的网店营业额也再创新高。

因为 virtual-try-on 技术的应用，越来越多的人过上了足不出户即可试穿各种衣物的幸福生活。

## 产品分析

### 潜在用户

以下用户可能对本产品有需求：

- 个人买家：用户可以尝试将一件衣服穿在身上，观察是否合适。用户还可以从多张试穿图片中选择适合自己的衣服；
- 网店服装卖家：卖家只需上传合适的衣服照片，用户就可以在线试穿，减少因为不合适，货不对板导致的差评与退货；
- 第三方电商平台：提高买家和卖家用户体验，提高平台成交率，获得更多利润；
- CV 科研工作者：类似的 image translation 模型可以使用该 APP 来做模型效果展示。

### 产品形式

本产品将基于 2020 CVPR 成果 CoCosNet 生成试穿图片。就产品形式而言，有以下方式：

- 移动端：Android, iOS;
- 网页端：chrome, edge.

就具体架构而言有两种方式：

- 模型放置云端，用户上传个人照片，服务器发送试穿照片：
    - 优点：架构简单，实现容易；
    - 缺点：对网络有一定要求；涉及用户个人照片隐私；服务器负载较高。
- 模型放置于本地，本地生成试穿图片：
    - 优点：服务器负载相对较小；
    - 缺点：本地图片生成对模型大小与本机计算能力都有一定的需求。

结论：

经过讨论，我们决定网页端和移动端多端开发，以满足不同用户的需求（如网店用户平时办公多用网页，而个人买家可以随时使用手机相机照相并生成图片）。网页端用户从云端获取生成的图片，避免下载模型。移动端用户则在本地生成图片，减少服务器负担。

### 产品功能

<!-- 网页端架构如下：

[图片]

移动端架构如下：

[图片] -->

我们认为用户端应该有以下功能：

- 上传全身照或者调用本地摄像头，拍摄用户全身照；
- 结合提供的衣服图片，通过模型生成大量的试穿照，供用户选择。用户可以不停地向下刷新滑动，以找到自己喜欢的衣服；
- 用户上传自己的衣服照片，生成试穿照；
- 服装与试穿照保存、收藏与分享功能；
- 导流至对应商家页面，为用户提供购买渠道。

后端提供以下功能：

- 用户管理系统，负责用户登录、付费服务等功能；

- 提供前端所需要的所有接口；
- 生成服装喜好的统计与分析数据，供需求分析和产品的改进提升。

模型端：

- 对原有模型进行进一步改进，使得生成结果的质量更高；
- 使用模型压缩等技术，使得模型可以方便地部署在移动端。
